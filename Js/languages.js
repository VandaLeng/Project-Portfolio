const translations = {
    en: {
        "nav-home": "Home",
        "nav-experience": "Experience",
        "nav-about": "About Me",
        "nav-contact": "Contact Me",
        "language-label": "Language:",
        "lang-en": "English",
        "lang-kh": "Khmer",
        "hero-title": "WEB DESIGN / WEB DEVELOPMENT / VANDA LENG / FRONT_END DEV",
        "hero-subtitle": "Build Your Future Smarter With <span>Our Modern <br> Web Designs By Vanda Leng</span>",
        "hero-description": "Passionate Web Developer Focused on Crafting Beautiful, Functional Websites That Provide Great User Experiences. I Turn Ideas into Interactive Digital Solutions.",
        "btn-download": "DOWNLOAD CV",
        "btn-hire": "HIRE ME",
        "skill-html": "HTML",
        "skill-css": "CSS",
        "skill-js": "JavaScript",
        "skill-vscode": "VS Code",
        "skill-bootstrap": "Bootstrap",
        "skill-php": "PHP",
        "skill-database": "Database",
        "skill-nodejs": "Node.js",
        "skill-github": "GitHub",
        "skill-jira": "Jira",
        "skill-oop": "OOP",
        "skill-laravel": "Laravel",
        "skill-vuejs": "Vue.js",
        "skill-python": "Python",
        "about-title": "About Me",
        "about-experience": "One Year Experienced Programming",
        "about-description": "My name is Vanda Leng, Cambodian. I am a passionate student who study at Passerelles Numeriques Cambodia (PNC). I study only one year in PNC but I have many experiences in Programming such as HTML, CSS, JavaScript, Node.js, Laravel, Vue.js and many more. For my passionate in coding and learning in new technology, I always try my best to learn new things everyday.",
        "about-name-label": "Name:",
        "about-name": "Vanda Leng",
        "about-age-label": "Age:",
        "about-age": "20 Years Old",
        "about-email-label": "Email:",
        "about-address-label": "Address:",
        "about-address": "Phnom Penh, Cambodia",
        "trainer-title": "Trainer",
        "contact-title": "Contact Me",
        "contact-description": "Get in touch with me anytime! You can use the contact form, send me an email, or even give me a phone call if that's more convenient. I'm always happy to hear from you. Whether you have a question, a project idea, or just want to say hello, don't hesitate to reach out!",
        "contact-address-label": "Address:",
        "contact-address-value": "Street 371, Borey Sorla, Phnom Penh, Cambodia",
        "contact-email-label": "Email:",
        "contact-email-value": "vanda.leng@student.passerellesnumeriques.org",
        "contact-phone-label": "Phone:",
        "contact-phone-value": "+855 69-699-696",
        "footer-description": "Follow my Facebook channel named Vanda_Leng to see more of such projects and other posts. Also Like and share these posts. Also follow me on GitHub and LinkedIn. I hope you will like my content.",
        "footer-quick-links": "Quick Links",
        "footer-services": "Services",
        "footer-newsletter": "Newsletter",
        "footer-newsletter-placeholder": "Enter your email",
        "footer-copyright": "©2025 | Made with Vanda Dev by Vanda Dev. All Rights Reserved.",

        // Experience page translations
        "experience-title": "My Projects",
        "experience-subtitle": "Experience Details",
        "stat-projects": "Projects",
        "stat-families": "Families Saved",
        "stat-staff": "Trained Staff",
        "stat-clients": "Trusted Clients",
        "view-web": "View Web",
        "team-members": "Team Members",
        "languages-tools": "Languages & Tools",

        // Project 1
        "project1-title": "PROJECT LIBRARY (static website interface)",
        "project1-description": "Library Project (Static Website Interface), I worked from 21st September 2024 to 4th November 2024. My team and I developed a static website for the library CSA. We structured sections according to each user's needs and implemented a clean, modern design. We used HTML, CSS, and JavaScript to create a website that is made responsive for different devices. I was responsible for managing tasks and assigning features using GitHub. Throughout the project, I collaborated closely with the customer (a teacher) and a coach to ensure the website met all requirements.",
        "member1-role": "Role: Fix & support",
        "member1-name": "Name: Kosol Pouy",
        "member2-role": "Role: Code Lead",
        "member2-name": "Name: Sina Neak",
        "member3-role": "Role: Design UI",
        "member3-name": "Name: Solin Neat",
        "member4-role": "Role: Project Manager",
        "member4-name": "Name: Vanda Leng",
        "member5-role": "Role: QA Tester",
        "member5-name": "Name: Dara Meng",

        // Project 2
        "project2-title": "Project Python (Email Automation System)",
        "project2-description": "An automated email system built with Python that schedules and sends personalized emails to clients. The system includes an analytics dashboard for tracking email performance and a template management feature for creating and storing email templates. We implemented secure authentication and authorization to protect sensitive data. The project was completed in collaboration with a team of developers and designers.",
        "member6-role": "Role: Backend Developer",
        "member6-name": "Name: Dara Sok",
        "member7-role": "Role: Project Manager",
        "member7-name": "Name: Bopha Chea",
        "member8-role": "Role: UI/UX Designer",
        "member8-name": "Name: Sopheap Meas",
        "member9-role": "Role: Frontend Developer",
        "member9-name": "Name: Vanda Leng",

        // Project 3
        "project3-title": "Project Note Taker (Note Taker App)",
        "project3-description": "A feature-rich note-taking application with cloud sync, reminders, and categorization. Available on both Android and iOS platforms with a clean, minimalist design. The app allows users to create, edit, and organize notes with rich text formatting, attach images, and set reminders. We implemented real-time synchronization across devices and offline functionality for a seamless user experience.",
        "member10-role": "Role: Mobile Developer",
        "member10-name": "Name: Virak Prum",
        "member11-role": "Role: Backend Engineer",
        "member11-name": "Name: Chanthy Heng",
        "member12-role": "Role: QA Tester",
        "member12-name": "Name: Kunthea Pich",
        "member13-role": "Role: UI Designer",
        "member13-name": "Name: Vanda Leng",
        "member14-role": "Role: Product Manager",
        "member14-name": "Name: Sokha Mey",

        // Project 4
        "project4-title": "Virtual Company One (VC1) Management System Project",
        "project4-description": "This project focused on building an internal management system for Virtual Company One (VC1) to streamline and automate the employee's team-related projects. The system allowed employees to submit, approve, or reject corporate events.\n\nWe developed the system using PHP with the MVC (Model-View-Controller) structure and used a MySQL database to store data. The frontend was developed using HTML, CSS, JavaScript, and Bootstrap to create a clean, intuitive interface, which helped us work efficiently and avoid conflicts during development. We supported our task tracking and communication through the entire development process.\n\nOur team was thorough throughout the entire process, to track and make sure the system worked as intended. We conducted extensive user testing and gathered feedback. This project taught us both technical and communication skills and gave us experience in delivering a functional product that met our client needs.",
        "member15-role": "Role: Scrum Master",
        "member15-name": "Name: Chab Charyna",
        "member16-role": "Role: Full Stack Developer",
        "member16-name": "Name: Vanda Leng",
        "member17-role": "Role: Backend Developer",
        "member17-name": "Name: Sothea Nim",
        "member18-role": "Role: UI/UX Designer",
        "member18-name": "Name: Dara Phan",
        "member19-role": "Role: QA Engineer",
        "member19-name": "Name: Borey San"
    },
    kh: {
        "nav-home": "ទំព័រដើម",
        "nav-experience": "បទពិសោធន៍",
        "nav-about": "អំពីខ្ញុំ",
        "nav-contact": "ទំនាក់ទំនង",
        "language-label": "ភាសា:",
        "lang-en": "អង់គ្លេស",
        "lang-kh": "ខ្មែរ",
        "hero-title": "ការរចនាវែបសាយ / ការអភិវឌ្ឍន៍វែបសាយ / វណ្ណដា ឡេង / អ្នកអភិវឌ្ឍន៍ផ្នែកខាងមុខ",
        "hero-subtitle": "សាងសង់អនាគតរបស់អ្នកឱ្យកាន់តែឆ្លាតវៃជាមួយ <span>ការរចនាវែបសាយទំនើបរបស់យើងដោយ វណ្ណដា ឡេង</span>",
        "hero-description": "អ្នកអភិវឌ្ឍន៍វែបសាយដែលមានចំណង់ចំណូលចិត្តផ្តោតលើការបង្កើតវែបសាយដ៏ស្រស់ស្អាត និងមានមុខងារដែលផ្តល់នូវបទពិសោធន៍អ្នកប្រើប្រាស់ដ៏អស្ចារ្យ។ ខ្ញុំប្រែក្លាយគំនិតទៅជាដំណោះស្រាយឌីជីថលអន្តរកម្ម។",
        "btn-download": "ទាញយក CV",
        "btn-hire": "ជួលខ្ញុំ",
        "skill-html": "HTML",
        "skill-css": "CSS",
        "skill-js": "JavaScript",
        "skill-vscode": "VS Code",
        "skill-bootstrap": "Bootstrap",
        "skill-php": "PHP",
        "skill-database": "ទិន្នន័យ",
        "skill-nodejs": "Node.js",
        "skill-github": "GitHub",
        "skill-jira": "Jira",
        "skill-oop": "OOP",
        "skill-laravel": "Laravel",
        "skill-vuejs": "Vue.js",
        "skill-python": "Python",
        "about-title": "អំពីខ្ញុំ",
        "about-experience": "បទពិសោធន៍សរសេរកម្មវិធីមួយឆ្នាំ",
        "about-description": "ខ្ញុំឈ្មោះ វណ្ណដា ឡេង ជនជាតិខ្មែរ។ ខ្ញុំជានិស្សិតដែលមានចំណង់ចំណូលចិត្ត ដែលកំពុងសិក្សានៅ Passerelles Numeriques Cambodia (PNC)។ ខ្ញុំសិក្សាតែមួយឆ្នាំនៅ PNC ប៉ុន្តែខ្ញុំមានបទពិសោធន៍ច្រើនក្នុងការសរសេរកម្មវិធីដូចជា HTML, CSS, JavaScript, Node.js, Laravel, Vue.js និងច្រើនទៀត។ ដោយសារតែចំណង់ចំណូលចិត្តរបស់ខ្ញុំក្នុងការសរសេរកូដ និងការសិក្សាបច្ចេកវិទ្យាថ្មីៗ ខ្ញុំតែងតែព្យាយាមឱ្យអស់ពីសមត្ថភាពដើម្បីរៀនរបស់ថ្មីជារៀងរាល់ថ្ងៃ។",
        "about-name-label": "ឈ្មោះ:",
        "about-name": "វណ្ណដា ឡេង",
        "about-age-label": "អាយុ:",
        "about-age": "២០ ឆ្នាំ",
        "about-email-label": "អ៊ីមែល:",
        "about-address-label": "អាសយដ្ឋាន:",
        "about-address": "ភ្នំពេញ, កម្ពុជា",
        "trainer-title": "គ្រូបង្វឹក",
        "contact-title": "ទំនាក់ទំនងមកខ្ញុំ",
        "contact-description": "ទាក់ទងមកខ្ញុំបានគ្រប់ពេល! អ្នកអាចប្រើទម្រង់ទំនាក់ទំនង ផ្ញើអ៊ីមែលមកខ្ញុំ ឬហៅទូរស័ព្ទប្រសិនបើវាកាន់តែងាយស្រួល។ ខ្ញុំតែងតែរីករាយក្នុងការទទួលស្តាប់ពីអ្នក។ មិនថាអ្នកមានសំណួរ គំនិតគម្រោង ឬគ្រាន់តែចង់ជំរាបសួរ កុំស្ទាក់ស្ទើកក្នុងការទាក់ទង!",
        "contact-address-label": "អាសយដ្ឋាន:",
        "contact-address-value": "ផ្លូវ ៣៧១, បុរីសូឡា, ភ្នំពេញ, កម្ពុជា",
        "contact-email-label": "អ៊ីមែល:",
        "contact-email-value": "vanda.leng@student.passerellesnumeriques.org",
        "contact-phone-label": "ទូរស័ព្ទ:",
        "contact-phone-value": "+៨៥៥ ៦៩-៦៩៩-៦៩៦",
        "footer-description": "តាមដានឆានែល Facebook របស់ខ្ញុំឈ្មោះ Vanda_Leng ដើម្បីមើលគម្រោងបែបនេះបន្ថែមទៀត និងការបង្ហោះផ្សេងៗ។ សូមចូលចិត្ត និងចែករំលែកការបង្ហោះទាំងនេះ។ ក៏សូមតាមដានខ្ញុំនៅលើ GitHub និង LinkedIn ផងដែរ។ ខ្ញុំសង្ឃឹមថាអ្នកនឹងចូលចិត្តមាតិការបស់ខ្ញុំ។",
        "footer-quick-links": "តំណភ្ជាប់រហ័ស",
        "footer-services": "សេវាកម្ម",
        "footer-newsletter": "ព្រឹត្តិបត្រ",
        "footer-newsletter-placeholder": "បញ្ចូលអ៊ីមែលរបស់អ្នក",
        "footer-copyright": "©២០២៥ | បង្កើតដោយ Vanda Dev ដោយ Vanda Dev។ រក្សាសិទ្ធិទាំងអស់។",

        // Experience page translations
        "experience-title": "គម្រោងរបស់ខ្ញុំ",
        "experience-subtitle": "ព័ត៌មានលម្អិតអំពីបទពិសោធន៍",
        "stat-projects": "គម្រោង",
        "stat-families": "គ្រួសារដែលបានជួយសង្គ្រោះ",
        "stat-staff": "បុគ្គលិកដែលបានបណ្តុះបណ្តាល",
        "stat-clients": "អតិថិជនដែលទុកចិត្ត",
        "view-web": "មើលវែបសាយ",
        "team-members": "សមាជិកក្រុម",
        "languages-tools": "ភាសា និងឧបករណ៍",

        // Project 1
        "project1-title": "គម្រោងបណ្ណាល័យ (ចំណុចប្រទាក់គេហទំព័រស្ថិតិ)",
        "project1-description": "គម្រោងបណ្ណាល័យ (ចំណុចប្រទាក់គេហទំព័រស្ថិតិ) ខ្ញុំបានធ្វើការចាប់ពីថ្ងៃទី ២១ ខែកញ្ញា ឆ្នាំ ២០២៤ ដល់ថ្ងៃទី ៤ ខែវិច្ឆិកា ឆ្នាំ ២០២៤។ ក្រុមរបស់ខ្ញុំនិងខ្ញុំបានអភិវឌ្ឍគេហទំព័រស្ថិតិសម្រាប់បណ្ណាល័យ CSA។ យើងបានរៀបចំផ្នែកតាមតម្រូវការរបស់អ្នកប្រើប្រាស់នីមួយៗ និងបានអនុវត្តការរចនាដែលស្អាតនិងទំនើប។ យើងបានប្រើ HTML, CSS និង JavaScript ដើម្បីបង្កើតគេហទំព័រដែលមានការឆ្លើយតបសម្រាប់ឧបករណ៍ផ្សេងៗ។ ខ្ញុំទទួលខុសត្រូវក្នុងការគ្រប់គ្រងភារកិច្ចនិងចាត់តាំងមុខងារដោយប្រើ GitHub។ ពេញមួយគម្រោង ខ្ញុំបានសហការយ៉ាងជិតស្និទ្ធជាមួយអតិថិជន (គ្រូបង្រៀន) និងគ្រូបង្វឹកដើម្បីធានាថាគេហទំព័របំពេញតាមតម្រូវការទាំងអស់។",
        "member1-role": "តួនាទី៖ ជួសជុល និងគាំទ្រ",
        "member1-name": "ឈ្មោះ៖ កុសល ប៉ូយ",
        "member2-role": "តួនាទី៖ អ្នកដឹកនាំកូដ",
        "member2-name": "ឈ្មោះ៖ សីណា នាគ",
        "member3-role": "តួនាទី៖ រចនាចំណុចប្រទាក់អ្នកប្រើប្រាស់",
        "member3-name": "ឈ្មោះ៖ សូលីន នៀត",
        "member4-role": "តួនាទី៖ អ្នកគ្រប់គ្រងគម្រោង",
        "member4-name": "ឈ្មោះ៖ វណ្ណដា ឡេង",
        "member5-role": "តួនាទី៖ អ្នកធ្វើតេស្តគុណភាព",
        "member5-name": "ឈ្មោះ៖ ដារ៉ា ម៉េង",

        // Project 2
        "project2-title": "គម្រោង Python (ប្រព័ន្ធស្វ័យប្រវត្តិកម្មអ៊ីមែល)",
        "project2-description": "ប្រព័ន្ធអ៊ីមែលស្វ័យប្រវត្តិដែលបានបង្កើតឡើងដោយប្រើ Python ដែលកំណត់ពេលវេលានិងផ្ញើអ៊ីមែលផ្ទាល់ខ្លួនទៅអតិថិជន។ ប្រព័ន្ធនេះរួមបញ្ចូលផ្ទាំងគ្រប់គ្រងការវិភាគសម្រាប់តាមដានដំណើរការអ៊ីមែល និងមុខងារគ្រប់គ្រងគំរូសម្រាប់បង្កើតនិងរក្សាទុកគំរូអ៊ីមែល។ យើងបានអនុវត្តការផ្ទៀងផ្ទាត់និងការអនុញ្ញាតដែលមានសុវត្ថិភាពដើម្បីការពារទិន្នន័យរសើប។ គម្រោងនេះត្រូវបានបញ្ចប់ក្នុងកិច្ចសហការជាមួយក្រុមអ្នកអភិវឌ្ឍន៍និងអ្នករចនា។",
        "member6-role": "តួនាទី៖ អ្នកអភិវឌ្ឍន៍ផ្នែកខាងក្រោយ",
        "member6-name": "ឈ្មោះ៖ ដារ៉ា សុខ",
        "member7-role": "តួនាទី៖ អ្នកគ្រប់គ្រងគម្រោង",
        "member7-name": "ឈ្មោះ៖ បុប្ផា ជា",
        "member8-role": "តួនាទី៖ អ្នករចនាចំណុចប្រទាក់អ្នកប្រើប្រាស់",
        "member8-name": "ឈ្មោះ៖ សុភាព ម៉ាស",
        "member9-role": "តួនាទី៖ អ្នកអភិវឌ្ឍន៍ផ្នែកខាងមុខ",
        "member9-name": "ឈ្មោះ៖ វណ្ណដា ឡេង",

        // Project 3
        "project3-title": "គម្រោងកត់ត្រា (កម្មវិធីកត់ត្រា)",
        "project3-description": "កម្មវិធីកត់ត្រាដែលមានមុខងារសម្បូរបែបជាមួយនឹងការធ្វើសមកាលកម្មពពក ការរំលឹក និងការចាត់ចំណាត់ថ្នាក់។ មាននៅលើទាំងប្រព័ន្ធប្រតិបត្តិការ Android និង iOS ជាមួយនឹងការរចនាសាមញ្ញនិងស្អាត។ កម្មវិធីនេះអនុញ្ញាតឱ្យអ្នកប្រើប្រាស់បង្កើត កែសម្រួល និងរៀបចំកំណត់ត្រាជាមួយនឹងការសម្រួលអត្ថបទសម្បូរបែប ភ្ជាប់រូបភាព និងកំណត់ការរំលឹក។ យើងបានអនុវត្តការធ្វើសមកាលកម្មពេលពិតរវាងឧបករណ៍និងមុខងារក្រៅបណ្តាញសម្រាប់បទពិសោធន៍អ្នកប្រើប្រាស់ដែលរលូន។",
        "member10-role": "តួនាទី៖ អ្នកអភិវឌ្ឍន៍ទូរស័ព្ទចល័ត",
        "member10-name": "ឈ្មោះ៖ វិរៈ ព្រុំ",
        "member11-role": "តួនាទី៖ វិស្វករផ្នែកខាងក្រោយ",
        "member11-name": "ឈ្មោះ៖ ចន្ធី ហេង",
        "member12-role": "តួនាទី៖ អ្នកធ្វើតេស្តគុណភាព",
        "member12-name": "ឈ្មោះ៖ គន្ធា ពិច",
        "member13-role": "តួនាទី៖ អ្នករចនាចំណុចប្រទាក់អ្នកប្រើប្រាស់",
        "member13-name": "ឈ្មោះ៖ វណ្ណដា ឡេង",
        "member14-role": "តួនាទី៖ អ្នកគ្រប់គ្រងផលិតផល",
        "member14-name": "ឈ្មោះ៖ សុខា ម៉ី",

        // Project 4
        "project4-title": "កម្មវិធីសន្និសីទនិម្មិត (VC) គម្រោងប្រព័ន្ធគ្រប់គ្រង",
        "project4-description": "គម្រោងនេះផ្តោតលើការបង្កើតប្រព័ន្ធគ្រប់គ្រងមាតិកាសម្រាប់ក្រុមហ៊ុននិម្មិតមួយ (VC1) ដើម្បីធ្វើឱ្យប្រតិបត្តិការប្រចាំថ្ងៃរបស់ក្រុមហ៊ុនកាន់តែមានប្រសិទ្ធភាព និងស្វ័យប្រវត្តិកម្ម។ ប្រព័ន្ធនេះអនុញ្ញាតឱ្យបុគ្គលិកបង្កើតនិងគ្រប់គ្រងមាតិកា តាមដានវឌ្ឍនភាពគម្រោង និងសហការប្រកបដោយប្រសិទ្ធភាព។ យើងបានអនុវត្តការរចនាដែលឆ្លើយតបដែលដំណើរការលើទាំងកុំព្យូទ័រនិងឧបករណ៍ចល័ត។\n\nកម្មវិធីនេះត្រូវបានបង្កើតឡើងដោយប្រើរចនាសម្ព័ន្ធ MVC (Model-View-Controller) និងប្រើមូលដ្ឋានទិន្នន័យ MySQL ដើម្បីរក្សាទុកទិន្នន័យ។ ផ្នែកខាងមុខត្រូវបានអភិវឌ្ឍដោយប្រើ HTML, CSS, JavaScript និង Bootstrap ដើម្បីបង្កើតចំណុចប្រទាក់ដែលស្អាតនិងងាយស្រួលប្រើ។ ផ្នែកខាងក្រោយត្រូវបានបង្កើតឡើងដោយប្រើ PHP និង Node.js សម្រាប់ដោះស្រាយតក្កវិជ្ជាផ្នែកម៉ាស៊ីនមេនិងចំណុចចុងបញ្ចប់ API។\n\nពេញមួយគម្រោង ក្រុមរបស់ខ្ញុំនិងខ្ញុំបានធ្វើការយ៉ាងជិតស្និទ្ធជាមួយភាគីពាក់ព័ន្ធដើម្បីប្រមូលតម្រូវការនិងធ្វើការកែលម្អលើមុខងារ។ យើងបានប្រើវិធីសាស្ត្រ agile ជាមួយនឹងការបោះជំហានរយៈពេលពីរសប្តាហ៍ដើម្បីផ្តល់ការធ្វើបច្ចុប្បន្នភាពបន្តបន្ទាប់និងប្រមូលមតិត្រឡប់។ គម្រោងនេះរួមបញ្ចូលប្រព័ន្ធផ្ទៀងផ្ទាត់អត្តសញ្ញាណអ្នកប្រើប្រាស់ ផ្ទាំងគ្រប់គ្រង ប្រព័ន្ធគ្រប់គ្រងមាតិកា និងឧបករណ៍តាមដានគម្រោង។",
        "member15-role": "តួនាទី៖ ស្ក្រាមមាស្ទ័រ",
        "member15-name": "ឈ្មោះ៖ ចាប់ ចរិយា",
        "member16-role": "តួនាទី៖ អ្នកអភិវឌ្ឍន៍ពេញលេញ",
        "member16-name": "ឈ្មោះ៖ វណ្ណដា ឡេង",
        "member17-role": "តួនាទី៖ អ្នកអភិវឌ្ឍន៍ផ្នែកខាងក្រោយ",
        "member17-name": "ឈ្មោះ៖ សុធា និម",
        "member18-role": "តួនាទី៖ អ្នករចនាចំណុចប្រទាក់អ្នកប្រើប្រាស់",
        "member18-name": "ឈ្មោះ៖ ដារ៉ា ផាន",
        "member19-role": "តួនាទី៖ វិស្វករធានាគុណភាព",
        "member19-name": "ឈ្មោះ៖ បូរី សាន"
    }
};

function updateLanguage(lang) {
    try {
        // Validate language
        if (!translations[lang]) {
            console.error(`Language ${lang} not supported. Falling back to English.`);
            lang = "en";
        }

        // Add transition effect
        document.body.style.transition = "opacity 0.3s ease";
        document.body.style.opacity = "0.5";

        // Update all elements with data-lang attributes
        document.querySelectorAll("[data-lang]").forEach((element) => {
            const key = element.getAttribute("data-lang");
            if (translations[lang] && translations[lang][key]) {
                // Handle HTML content for specific keys
                if (key === "hero-subtitle" || key.includes("skill-")) {
                    element.innerHTML = translations[lang][key];
                } else if (key === "footer-newsletter-placeholder") {
                    element.placeholder = translations[lang][key];
                } else {
                    element.textContent = translations[lang][key];
                }
            } else {
                console.warn(`Translation missing for key: ${key} in language: ${lang}`);
            }
        });

        // Update HTML lang attribute
        document.documentElement.lang = lang;

        // Update body class for font changes
        document.body.classList.remove("en", "kh");
        document.body.classList.add(lang);

        // Update language wrapper class
        const languageWrapper = document.querySelector(".language-wrapper");
        if (languageWrapper) {
            languageWrapper.classList.remove("en", "kh");
            languageWrapper.classList.add(lang);
        }

        // Save language preference
        localStorage.setItem("language", lang);

        // Restore opacity after transition
        setTimeout(() => {
            document.body.style.opacity = "1";
        }, 300);
    } catch (error) {
        console.error("Error updating language:", error);
    }
}

document.addEventListener("DOMContentLoaded", () => {
    try {
        // Load saved language or default to English
        const savedLang = localStorage.getItem("language") || "en";
        const languageSelect = document.getElementById("language");

        if (languageSelect) {
            // Set initial select value
            languageSelect.value = savedLang;

            // Update language on page load
            updateLanguage(savedLang);

            // Handle language change
            languageSelect.addEventListener("change", (event) => {
                const newLang = event.target.value;
                updateLanguage(newLang);
            });
        } else {
            console.warn("Language select element not found.");
            updateLanguage(savedLang); // Apply default language anyway
        }
    } catch (error) {
        console.error("Error initializing language:", error);
    }
});