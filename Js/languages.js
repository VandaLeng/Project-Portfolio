const translations = {
    en: {
        "nav-home": "Home",
        "nav-experience": "Experience",
        "nav-about": "About Me",
        "nav-contact": "Contact Me",
        "language-label": "Language:",
        "lang-en": "English",
        "lang-kh": "Khmer",
        "hero-title": "WEB DESIGN / WEB DEVELOPMENT / VANDA LENG / FRONT_END DEV",
        "hero-subtitle": "Build Your Future Smarter With <span>Our Modern <br> Web Designs By Vanda Leng</span>",
        "hero-description": "Passionate Web Developer Focused on Crafting Beautiful, Functional Websites That Provide Great User Experiences. I Turn Ideas into Interactive Digital Solutions.",
        "btn-download": "DOWNLOAD CV",
        "btn-hire": "HIRE ME",
        "skill-html": "HTML",
        "skill-css": "CSS",
        "skill-js": "JavaScript",
        "skill-vscode": "VS Code",
        "skill-bootstrap": "Bootstrap",
        "skill-php": "PHP",
        "skill-database": "Database",
        "skill-nodejs": "Node.js",
        "skill-github": "GitHub",
        "skill-jira": "Jira",
        "skill-oop": "OOP",
        "skill-laravel": "Laravel",
        "skill-vuejs": "Vue.js",
        "about-title": "About Me",
        "about-experience": "One Year Experienced Programming",
        "about-description": "My name is Vanda Leng, Cambodian. I am a passionate student who study at Passerelles Numeriques Cambodia (PNC). I study only one year in PNC but I have many experiences in Programming such as HTML, CSS, JavaScript, Node.js, Laravel, Vue.js and many more. For my passionate in coding and learning in new technology, I always try my best to learn new things everyday.",
        "about-name-label": "Name:",
        "about-name": "Vanda Leng",
        "about-age-label": "Age:",
        "about-age": "20 Years Old",
        "about-email-label": "Email:",
        "about-address-label": "Address:",
        "about-address": "Phnom Penh, Cambodia",
        "trainer-title": "Trainer",
        "contact-title": "Contact Me",
        "contact-description": "Get in touch with me anytime! You can use the contact form, send me an email, or even give me a phone call if that's more convenient. I'm always happy to hear from you. Whether you have a question, a project idea, or just want to say hello, don't hesitate to reach out!",
        "contact-address-label": "Address:",
        "contact-address-value": "Street 371, Borey Sorla, Phnom Penh, Cambodia",
        "contact-email-label": "Email:",
        "contact-email-value": "vanda.leng@student.passerellesnumeriques.org",
        "contact-phone-label": "Phone:",
        "contact-phone-value": "+855 69-699-696",
        "footer-description": "Follow my Facebook channel named Vanda_Leng to see more of such projects and other posts. Also Like and share these posts. Also follow me on GitHub and LinkedIn. I hope you will like my content.",
        "footer-quick-links": "Quick Links",
        "footer-services": "Services",
        "footer-newsletter": "Newsletter",
        "footer-newsletter-placeholder": "Enter your email",
        "footer-copyright": "©2025 | Made with Vanda Dev by Vanda Dev. All Rights Reserved."
    },
    kh: {
        "nav-home": "ទំព័រដើម",
        "nav-experience": "បទពិសោធន៍",
        "nav-about": "អំពីខ្ញុំ",
        "nav-contact": "ទំនាក់ទំនង",
        "language-label": "ភាសា:",
        "lang-en": "អង់គ្លេស",
        "lang-kh": "ខ្មែរ",
        "hero-title": "ការរចនាវែបសាយ / ការអភិវឌ្ឍន៍វែបសាយ / វណ្ណដា ឡេង / អ្នកអភិវឌ្ឍន៍ផ្នែកខាងមុខ",
        "hero-subtitle": "សាងសង់អនាគតរបស់អ្នកឱ្យកាន់តែឆ្លាតវៃជាមួយ <span>ការរចនាវែបសាយទំនើបរបស់យើងដោយ វណ្ណដា ឡេង</span>",
        "hero-description": "អ្នកអភិវឌ្ឍន៍វែបសាយដែលមានចំណង់ចំណូលចិត្តផ្តោតលើការបង្កើតវែបសាយដ៏ស្រស់ស្អាត និងមានមុខងារដែលផ្តល់នូវបទពិសោធន៍អ្នកប្រើប្រាស់ដ៏អស្ចារ្យ។ ខ្ញុំប្រែក្លាយគំនិតទៅជាដំណោះស្រាយឌីជីថលអន្តរកម្ម។",
        "btn-download": "ទាញយក CV",
        "btn-hire": "ជួលខ្ញុំ",
        "skill-html": "HTML",
        "skill-css": "CSS",
        "skill-js": "JavaScript",
        "skill-vscode": "VS Code",
        "skill-bootstrap": "Bootstrap",
        "skill-php": "PHP",
        "skill-database": "ទិន្នន័យ",
        "skill-nodejs": "Node.js",
        "skill-github": "GitHub",
        "skill-jira": "Jira",
        "skill-oop": "OOP",
        "skill-laravel": "Laravel",
        "skill-vuejs": "Vue.js",
        "about-title": "អំពីខ្ញុំ",
        "about-experience": "បទពិសោធន៍សរសេរកម្មវិធីមួយឆ្នាំ",
        "about-description": "ខ្ញុំឈ្មោះ វណ្ណដា ឡេង ជនជាតិខ្មែរ។ ខ្ញុំជានិស្សិតដែលមានចំណង់ចំណូលចិត្ត ដែលកំពុងសិក្សានៅ Passerelles Numeriques Cambodia (PNC)។ ខ្ញុំសិក្សាតែមួយឆ្នាំនៅ PNC ប៉ុន្តែខ្ញុំមានបទពិសោធន៍ច្រើនក្នុងការសរសេរកម្មវិធីដូចជា HTML, CSS, JavaScript, Node.js, Laravel, Vue.js និងច្រើនទៀត។ ដោយសារតែចំណង់ចំណូលចិត្តរបស់ខ្ញុំក្នុងការសរសេរកូដ និងការសិក្សាបច្ចេកវិទ្យាថ្មីៗ ខ្ញុំតែងតែព្យាយាមឱ្យអស់ពីសមត្ថភាពដើម្បីរៀនរបស់ថ្មីជារៀងរាល់ថ្ងៃ។",
        "about-name-label": "ឈ្មោះ:",
        "about-name": "វណ្ណដា ឡេង",
        "about-age-label": "អាយុ:",
        "about-age": "២០ ឆ្នាំ",
        "about-email-label": "អ៊ីមែល:",
        "about-address-label": "អាសយដ្ឋាន:",
        "about-address": "ភ្នំពេញ, កម្ពុជា",
        "trainer-title": "គ្រូបង្វឹក",
        "contact-title": "ទំនាក់ទំនងមកខ្ញុំ",
        "contact-description": "ទាក់ទងមកខ្ញុំបានគ្រប់ពេល! អ្នកអាចប្រើទម្រង់ទំនាក់ទំនង ផ្ញើអ៊ីមែលមកខ្ញុំ ឬហៅទូរស័ព្ទប្រសិនបើវាកាន់តែងាយស្រួល។ ខ្ញុំតែងតែរីករាយក្នុងការទទួលស្តាប់ពីអ្នក។ មិនថាអ្នកមានសំណួរ គំនិតគម្រោង ឬគ្រាន់តែចង់ជំរាបសួរ កុំស្ទាក់ស្ទើកក្នុងការទាក់ទង!",
        "contact-address-label": "អាសយដ្ឋាន:",
        "contact-address-value": "ផ្លូវ ៣៧១, បុរីសូឡា, ភ្នំពេញ, កម្ពុជា",
        "contact-email-label": "អ៊ីមែល:",
        "contact-email-value": "vanda.leng@student.passerellesnumeriques.org",
        "contact-phone-label": "ទូរស័ព្ទ:",
        "contact-phone-value": "+៨៥៥ ៦៩-៦៩៩-៦៩៦",
        "footer-description": "តាមដានឆានែល Facebook របស់ខ្ញុំឈ្មោះ Vanda_Leng ដើម្បីមើលគម្រោងបែបនេះបន្ថែមទៀត និងការបង្ហោះផ្សេងៗ។ សូមចូលចិត្ត និងចែករំលែកការបង្ហោះទាំងនេះ។ ក៏សូមតាមដានខ្ញុំនៅលើ GitHub និង LinkedIn ផងដែរ។ ខ្ញុំសង្ឃឹមថាអ្នកនឹងចូលចិត្តមាតិការបស់ខ្ញុំ។",
        "footer-quick-links": "តំណភ្ជាប់រហ័ស",
        "footer-services": "សេវាកម្ម",
        "footer-newsletter": "ព្រឹត្តិបត្រ",
        "footer-newsletter-placeholder": "បញ្ចូលអ៊ីមែលរបស់អ្នក",
        "footer-copyright": "©២០២៥ | បង្កើតដោយ Vanda Dev ដោយ Vanda Dev។ រក្សាសិទ្ធិទាំងអស់។"
    }
};

function updateLanguage(lang) {
    try {
        // Validate language
        if (!translations[lang]) {
            console.error(`Language ${lang} not supported. Falling back to English.`);
            lang = "en";
        }

        // Add transition effect
        document.body.style.transition = "opacity 0.3s ease";
        document.body.style.opacity = "0.5";

        // Update all elements with data-lang attributes
        document.querySelectorAll("[data-lang]").forEach((element) => {
            const key = element.getAttribute("data-lang");
            if (translations[lang] && translations[lang][key]) {
                // Handle HTML content for specific keys
                if (key === "hero-subtitle" || key.includes("skill-")) {
                    element.innerHTML = translations[lang][key];
                } else if (key === "footer-newsletter-placeholder") {
                    element.placeholder = translations[lang][key];
                } else {
                    element.textContent = translations[lang][key];
                }
            } else {
                console.warn(`Translation missing for key: ${key} in language: ${lang}`);
            }
        });

        // Update HTML lang attribute
        document.documentElement.lang = lang;

        // Update body class for font changes
        document.body.classList.remove("en", "kh");
        document.body.classList.add(lang);

        // Update language wrapper class
        const languageWrapper = document.querySelector(".language-wrapper");
        if (languageWrapper) {
            languageWrapper.classList.remove("en", "kh");
            languageWrapper.classList.add(lang);
        }

        // Save language preference
        localStorage.setItem("language", lang);

        // Restore opacity after transition
        setTimeout(() => {
            document.body.style.opacity = "1";
        }, 300);
    } catch (error) {
        console.error("Error updating language:", error);
    }
}

document.addEventListener("DOMContentLoaded", () => {
    try {
        // Load saved language or default to English
        const savedLang = localStorage.getItem("language") || "en";
        const languageSelect = document.getElementById("language");

        if (languageSelect) {
            // Set initial select value
            languageSelect.value = savedLang;

            // Update language on page load
            updateLanguage(savedLang);

            // Handle language change
            languageSelect.addEventListener("change", (event) => {
                const newLang = event.target.value;
                updateLanguage(newLang);
            });
        } else {
            console.warn("Language select element not found.");
            updateLanguage(savedLang); // Apply default language anyway
        }
    } catch (error) {
        console.error("Error initializing language:", error);
    }
});